---
import MobileMenuToggle from "@/components/mobile-menu-toggle.tsx";
import LogoImg from "@/assets/images/logo.png";
import { Image } from "astro:assets";

// SEO-optimized navigation items with descriptive titles
const navItems = [
    {
        href: "/",
        label: "Accueil",
        title: "Accueil - Charlotte Drouilly Kinésiologue en Suisse",
        description: "Page d'accueil du cabinet de kinésiologie de Charlotte Drouilly en Suisse"
    },
    {
        href: "/a-propos",
        label: "À propos",
        title: "À propos de Charlotte Drouilly - Parcours et formation en kinésiologie",
        description: "Découvrez le parcours, la formation et l'approche thérapeutique de Charlotte Drouilly, kinésiologue expérimentée"
    },
    {
        href: "/tarifs",
        label: "Tarifs",
        title: "Tarifs des séances de kinésiologie et massage thérapeutique",
        description: "Consultez les tarifs des séances de kinésiologie intuitive, massage sacré et accompagnement holistique"
    },
    {
        href: "/contact",
        label: "Contact",
        title: "Contact et prise de rendez-vous - Charlotte Drouilly Kinésiologue",
        description: "Contactez Charlotte Drouilly pour prendre rendez-vous ou obtenir des informations sur les séances de kinésiologie"
    },
];

const businessInfo = {
    name: "Charlotte Drouilly",
    profession: "Kinésiologue",
    location: "Genève, Suisse",
    phone: "+41 22 123 45 67"
};
---

<header role="banner">
    <nav
        class="bg-card/70 backdrop-blur-lg border-b border-border/20 sticky top-0 z-50"
        role="navigation"
        aria-label="Navigation principale"
    >
        <div class="max-w-6xl mx-auto px-6 sm:px-8 lg:px-12">
            <div class="flex justify-between items-center h-20">

                <!-- Logo et nom du praticien -->
                <div class="flex items-center">
                    <a
                        href="/"
                        class="flex items-center space-x-3"
                        title={`${businessInfo.name} - ${businessInfo.profession} à ${businessInfo.location}`}
                        aria-label={`Retour à l'accueil du site de ${businessInfo.name}, ${businessInfo.profession} à ${businessInfo.location}`}
                    >
                        <div class="w-12 h-12 bg-gradient-to-br from-primary to-secondary organic-shape flex items-center justify-center shadow-lg">
                            <Image
                                src={LogoImg}
                                width={20}
                                height={20}
                                alt={`Logo de ${businessInfo.name}`}
                                loading="eager"
                            />
                        </div>
                        <div class="flex flex-col">
                            <span class="font-sans font-bold text-xl text-foreground tracking-wide">
                                Charlotte
                            </span>
                            <span class="text-xs text-muted-foreground font-medium">
                                Kinésiologue
                            </span>
                        </div>
                    </a>
                </div>

                <!-- Navigation principale desktop -->
                <nav class="hidden md:flex items-center" role="navigation" aria-label="Menu principal">
                    <ul class="flex items-center space-x-8 list-none m-0 p-0">
                        {navItems.map((item) => (
                            <li>
                                <a
                                    href={item.href}
                                    title={item.title}
                                    class="text-foreground/80 hover:text-primary transition-all duration-300 font-medium text-base py-2 px-1 font-sans relative group focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50 rounded-sm"
                                    aria-describedby={`desc-${item.href.slice(1) || 'home'}`}
                                >
                                    {item.label}
                                    <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-primary transition-all duration-300 group-hover:w-full rounded-full" aria-hidden="true"></span>
                                </a>
                                <!-- Descriptions cachées pour l'accessibilité -->
                                <span
                                    id={`desc-${item.href.slice(1) || 'home'}`}
                                    class="sr-only"
                                >
                                    {item.description}
                                </span>
                            </li>
                        ))}

                        <!-- Bouton de réservation -->
                        <li>
                            <a
                                href="https://calendly.com/charlotte-drouilly"
                                target="_blank"
                                rel="noopener noreferrer"
                                class="inline-flex items-center bg-primary hover:bg-primary/90 text-primary-foreground rounded-full px-6 py-3 shadow-lg hover:shadow-xl transition-all duration-300 font-sans hover:scale-105 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"
                                title="Prendre rendez-vous en ligne avec Charlotte Drouilly pour une séance de kinésiologie"
                                aria-label="Réserver une consultation en kinésiologie avec Charlotte Drouilly"
                            >
                                <svg
                                    class="w-4 h-4 mr-2"
                                    xmlns="http://www.w3.org/2000/svg"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    aria-hidden="true"
                                >
                                    <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                                </svg>
                                Réserver
                            </a>
                        </li>
                    </ul>
                </nav>

                <!-- Menu mobile -->
                <div class="md:hidden relative">
                    <MobileMenuToggle client:visible navItems={navItems.map(item => ({ href: item.href, label: item.label }))} />
                </div>
            </div>
        </div>
    </nav>
</header>

<!-- Fil d'Ariane (breadcrumb) pour les pages internes -->
{Astro.url.pathname !== '/' && (
    <nav aria-label="Fil d'Ariane" class="bg-muted/30 border-b border-border/10">
        <div class="max-w-6xl mx-auto px-6 sm:px-8 lg:px-12 py-3">
            <ol class="flex items-center space-x-2 text-sm text-muted-foreground">
                <li>
                    <a href="/" class="hover:text-primary transition-colors duration-300">
                        Accueil
                    </a>
                </li>
                <li aria-hidden="true">/</li>
                <li>
                    <span class="text-foreground font-medium" aria-current="page">
                        {navItems.find(item => item.href === Astro.url.pathname)?.label || 'Page actuelle'}
                    </span>
                </li>
            </ol>
        </div>
    </nav>
)}
